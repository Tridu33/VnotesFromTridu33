




**192.168.115.62** 就是我们要找的WSL2的IP Address，后面会以**\<wsl-ip\>**引用
```
(base) tridu33@tridu33:~$ ip a |grep "global eth0"
    inet 192.168.115.62/20 brd 192.168.127.255 scope global eth0

(base) tridu33@tridu33:~$ ifconfig
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.115.62  netmask 255.255.240.0  broadcast 192.168.127.255
        inet6 fe80::215:5dff:fe40:f7b6  prefixlen 64  scopeid 0x20<link>
        ether 00:15:5d:40:f7:b6  txqueuelen 1000  (Ethernet)
        RX packets 4230218  bytes 6108650575 (6.1 GB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 1636280  bytes 121049878 (121.0 MB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10<host>
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 65157  bytes 8615929 (8.6 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 65157  bytes 8615929 (8.6 MB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

```

```
由于多物理网卡，虚拟机网卡等原因，Windows会有多个IP Address，我们需要找出能与WSL2连同的那个。
(base) tridu33@tridu33:~$ cat /etc/resolv.conf
# This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:
# [network]
# generateResolvConf = false
nameserver 192.168.112.1
```

nameserver **192.168.112.1** 就是我们要找的Windows的IP Address，后面会以**\<win-ip\>**引用




cmd ipconfig
```
IPv4 Address. . . . . . . . . . . : 192.168.1.103
```




18945之前的WSL2版本，如果我们在容器里运行了一个网络服务，例如启动一个WEB服务。想在 Win10 宿主机中访问这个WEB服务，我们先要通过 ip a 或 ifconfig 命令查看其IP地址才能访问，而且更崩溃的是每次重启后再运行WSL2容器，其IP地址和网关会重新分配。

18945: 支持通过localhost访问WSL2容器。本次更新改进了这个问题，我们在WIN10中能够直接通过localhost 访问到WSL2容器中的服务，并且WLS2容器中的网络服务也能绑定到 0.0.0.0 上

例如：WSL2 容器内启动web服务器，使用python http.server模块启动一个WEB服务
python3 -m http.server，默认端口8000
然后在win10中的web浏览器中访问 `http://localhost:8000/`有可能性，
> http://**192.168.115.62**:8000/
**一定行**！




---
WSL2访问Windows
默认情况下Windows的防火墙会阻止WSL2中应用对Windows的网络访问(see: Add "allow" rule to Windows firewall for WSL2 network · Issue #4585 · microsoft/WSL (github.com))，解决办法是添加一条防火墙规则允许WSL2对Windows的访问。请以管理员身份打开PowerShell并键入以下命令：

```
PS C:\> New-NetFirewallRule -DisplayName "WSL" -Direction Inbound  -InterfaceAlias "vEthernet (WSL)"  -Action Allow
```

以上配置好后，

在WSL2中通过<win-ip>和<端口>访问Windows中的应用程序。

在Windows中通过<wsl-ip>和<端口>访问WSL2中的应用程序。可以在PowerShell中, 直接使用  ssh  tridu33@localhost


如何在局域网的其他主机上中访问本机的WSL2 - Kingdo的文章 - 知乎
https://zhuanlan.zhihu.com/p/425312804


# 容器服务
使用容器,来配置web服务,显然是最佳选择,这个时候你就会遇到本文的问题,因为你可能希望让其他主机来访问你的容器服务!

但是,我并不推荐你这么做, 更好的方式是安装docker-desktop, 即Windows版的docker, WSL2会自动连接到Windows的Docker 服务中.

此时启动的容器使用的端口和Windows的端口是"相通"的,完全不需要配置端口转发!




```
# 不写版本号 默认拉取最新版本
docker pull mysql 

# 写版本号,则拉取确定的版本
docker pull mysql:8.0
# 查看镜像
docker images
docker run --name mysql1 -p 3306:3306 -v /data/mysql:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=root -d mysql:8.0
docker ps
# 登陆数据库
docker exec -it 09d30f1ae8a0  /bin/bash
mysql -uroot -proot
```
-p 3306:3306

表示把容器端口映射到本地，如果不映射本地连接不上数据库，只能进入到容器里面连接

-v /data/mysql:/var/lib/mysql，

数据文件目录，表示把容器/var/lib/mysql目录，映射到/data/mysql，这样不会因容器重新启动导致数据丢失

-e MYSQL_ROOT_PASSWORD=root

表示mysql 密码为root

–name mysql1

表示容器名称为mysql1

---

服务器地址： localhost

Dbdeaver链接数据库，
数据库写mysql1 
密码是root 

就是上面用docker安装数据库的时候的名字和密码





# 从 Linux（主机 IP）访问 Windows 网络应用

如何在局域网的其他主机上中访问本机的WSL2 - Kingdo的文章 - 知乎
https://zhuanlan.zhihu.com/p/425312804


写host文件映射局域网ip 通过localhost直接访问 WSL2 容器中的服务 https://learn.microsoft.com/zh-cn/windows/wsl/networking


# 通过远程 IP 地址进行连接
当使用远程 IP 地址连接到应用程序时，它们将被视为来自局域网 (LAN) 的连接。 这意味着你需要确保你的应用程序可以接受 LAN 连接。

例如，你可能需要将应用程序绑定到 0.0.0.0 而非 127.0.0.1。 以使用 Flask 的 Python 应用为例，可以通过以下命令执行此操作：app.run(host='0.0.0.0')。 进行这些更改时请注意安全性，因为这将允许来自你的 LAN 的连接。



# 从局域网 (LAN) 访问 WSL 2 分发版
当使用 WSL 1 分发版时，如果计算机设置为可供 LAN 访问，那么在 WSL 中运行的应用程序也可供在 LAN 中访问。

这不是 WSL 2 中的默认情况。 WSL 2 有一个带有其自己独一无二的 IP 地址的虚拟化以太网适配器。 目前，若要启用此工作流，你需要执行与常规虚拟机相同的步骤。 （我们正在寻找改善此体验的方法。）

下面是一个示例 Windows 命令，用于添加侦听主机上的端口 4000 的端口代理并将其连接到端口 4000，并使用 IP 地址 192.168.101.100 连接到 WSL 2 VM。

```
netsh interface portproxy add v4tov4 listenport=4000 listenaddress=0.0.0.0 connectport=4000 connectaddress=192.168.101.100
```

**另一个例子**

在 Windows 10 主机上配置端口转发，将手机端向 192.168.137.1:8080 的访问请求转发至 172.24.65.38:8080

使用管理员打开 Powershell
配置端口转发：
```
C:\Users> netsh interface portproxy add v4tov4 listenport=8080 connectaddress=172.24.65.38 connectport=8080
```
配置防火墙添加允许入站规则：

```
C:\Users> New-NetFirewallRule -DisplayName "Allow Inbound TCP Port 8080" -Direction Inbound -Action Allow -Protocol TCP -LocalPort 8080

```


删除配置的命令
```
C:\Users> netsh interface portproxy show v4tov4
C:\Users> netsh interface portproxy delete v4tov4 listenport=8080
C:\Users> Remove-NetFirewallRule -DisplayName "Allow Inbound TCP Port 8080"
```
WSL2 的 IP 地址可能会变，所以需要修改端口转发规则，或者根据参考链接通过函数自动化实现












# WSL和windows10互相访问局域网应用数据库


WSL 与 Windows 通信
https://juejin.cn/post/7037893084998270990




# wsl静态ip

https://blog.csdn.net/weixin_41301508/article/details/108939520

 
 



























































