# 1. 行為树(Behavior Tree)类似于决策树的树形决策结构来选择当前环境下应该做出的具体行为。
行为树概念与结构 - spiritsaway的文章 - 知乎
https://zhuanlan.zhihu.com/p/92298402

由于这种ai控制结构在配置、调试、复用之上的便利，行为树的使用也逐渐成为了现在游戏的主流ai配置方式。


行為树在游戏AI设计中算是后起之秀了，是从2000年开始渐渐的取代了状态机。而最发扬光大的行為树作品当属席捲XBOX平台的最后一战2。





行為树的节点总共有以下四种类型。

Root：永远在最上层，是AI起始地点。

Leaf：永远在最下层，不会有比他更下层的类型，这也是行為的节点，像是移动、等待、
攻击、巡逻等行為通通都写在Leaf中。

再来则是两个中层的类型，他们可以有上层也可以有下层。

Selector：中文叫"选择器"，顾名思义，用来根据订定的规则来按照顺序一个个寻找哪一个可以执行。例如：它底下有两个节点，"远程攻击"及"近战攻击"，那Selector就可以根据设定的攻击距离来按照顺序寻找哪个攻击适用，他会先看远程攻击适不适合，不适合再去看近战攻击。

Sequence：中文為"顺序执行"，这个就比较简单暴力了，它就是直接将它底下的节点按照顺序全部执行一遍。例如：它底下有"面向目标"以及"开枪"，那他就按照顺序先面向目标，然后再开枪。



基本行為树就只有这四种类别的节点(其实还有Parallel，中文為"并行"，但这算较进阶的节点，较不常使用，故略过不提)，然后透过将他们层层连结，就能创造出无数的AI行為。




行為树的运行逻辑是从上至下的，所以会从最上方的Root出发，然后一路透过询问的方式找路走到最下方，在走到最下方后，执行最下方的行為，然后从头开始。上方就显示了，他先判断是否看到目标，然后再判断自己打不打得到，最后再选择要做啥。











https://indienova.com/indie-game-development/ai-behavior-trees-how-they-work/

游戏 Project Zomboid 的开发者 Chris Simpson，作者介绍了行为树的基本逻辑以及他使用行为树的一些经验，